2015-12-17 12:19:30,871 - DEBUG - src.TianchengTest[179] - 测试开始时间: 2015-12-17 12:19:30
2015-12-17 12:19:30,881 - DEBUG - src.TianchengTest[26] - 运行模式：部分执行
2015-12-17 12:19:30,890 - DEBUG - src.TianchengTest[183] - 待执行用例: {'AFP': [1]}
2015-12-17 12:19:30,898 - DEBUG - src.TianchengTest[186] - Starting thread: TestRunThread
2015-12-17 12:19:30,907 - DEBUG - src.TianchengTest[145] - [TestRunThread] 开始执行用例: (AFP, 1)
---
2015-12-17 12:19:30,921 - DEBUG - src.Interface_DriverEngine[132] - [TestRunThread] 驱动执行:headers:{'TOKEN': 'abcdefghijk', 'APPID': '10'} TestData:{"FunctionCode":"100122","CurrentTime":"20150723203212000000","MsgBody":{"user_id":"abc123456","ProjectId":"123","identity_card":"003001195901160031","idtype":"0","name":"陈刚","bank_cart":"12345","reasonno":"04","blackBox":"123","ip":"192.168.1.122","account_login":"test123","mobile_phone":"18675559750","loanType":"99","currency":"23232","loanMoney":10000,"loanTimeLimit":12,"applyDate":"2015-08-01","assureType":"D","creditAddress":"北京","is_student":1,"is_first_time":0,"degree":"本科","RELATION_VERIFICATION":[{"relation_name":"陈刚3","relation_phone":"18675559750"},{"relation_name":"","relation_phone":""}]}}
2015-12-17 12:19:30,954 - DEBUG - src.Interface_DriverEngine[135] - [TestRunThread] 执行结果:DriverResult:<Response [200]>
2015-12-17 12:19:31,924 - DEBUG - src.TianchengTest[193] - Starting thread: TestAssertThread
2015-12-17 12:19:31,948 - DEBUG - src.TianchengTest[200] - 等待子线程TestRunThread结束...
2015-12-17 12:19:31,950 - DEBUG - src.TianchengTest[75] - [TestAssertThread] 从队列taskassert_queue中取出一条任务: ('AFP', 1, u'30', 0, <Response [200]>)
2015-12-17 12:19:31,973 - DEBUG - src.TianchengTest[99] - [TestAssertThread] 状态处理后timestate: {('AFP', 1): {'timeoutdelay': 0.0, 'timeouttask': 30.0}}
2015-12-17 12:19:31,974 - DEBUG - src.TianchengTest[202] - 子线程：TestRunThread结束
2015-12-17 12:19:32,000 - DEBUG - src.TianchengTest[107] - [TestAssertThread] 调用断言模块进行处理: AFP 1 <Response [200]>
2015-12-17 12:19:32,002 - DEBUG - src.TianchengTest[204] - 等待子线程TestAssertThread结束...
2015-12-17 12:19:32,020 - DEBUG - src.Interface_AssertEngine[98] - [TestAssertThread] 驱动断言:response:<Response [200]> ExpectationDict:{u'usermodelhistory': {u'status': u'0', u'modelName': u'\u989d\u5ea6\u8d44\u683c', u'mobilePhone': u'18675559750', u'modelType': 3, u'modelResult': u'1', u'identityCard': u'003001195901160031', u'AppID': u'abc123456', u'errorInfo': u'\u7528\u6237\u5e74\u9f84\u4e0d\u7b26\u5408\u8981\u6c42', u'realName': u'\u9648\u521a'}, u'HTTPResponse': {u'Status': u'0', u'Messge': u'success'}, u'ResultJson': {u'Status': u'0', u'model_Result': u'1'}} TestDataDict: {u'FunctionCode': u'100122', u'MsgBody': {u'idtype': u'0', u'account_login': u'test123', u'is_first_time': 0, u'assureType': u'D', u'loanType': u'99', u'ip': u'192.168.1.122', u'RELATION_VERIFICATION': [{u'relation_name': u'\u9648\u521a3', u'relation_phone': u'18675559750'}, {u'relation_name': u'', u'relation_phone': u''}], u'currency': u'23232', u'loanTimeLimit': 12, u'user_id': u'abc123456', u'is_student': 1, u'creditAddress': u'\u5317\u4eac', u'bank_cart': u'12345', u'loanMoney': 10000, u'mobile_phone': u'18675559750', u'degree': u'\u672c\u79d1', u'ProjectId': u'123', u'reasonno': u'04', u'blackBox': u'123', u'name': u'\u9648\u521a', u'identity_card': u'003001195901160031', u'applyDate': u'2015-08-01'}, u'CurrentTime': u'20150723203212000000'}
2015-12-17 12:19:32,051 - DEBUG - src.Interface_Assert[41] - [TestAssertThread] init connecting mysql db: fraudcheck_77testteam 192.168.18.85:3306 write/tc12345
2015-12-17 12:19:32,076 - DEBUG - src.ModAFP[165] - [TestAssertThread] 比较响应数据与期望数据各字段: Expectation_HTTPResponse: {u'Status': u'0', u'Messge': u'success'} responseContentDict: {u'Status': u'0', u'Messge': u'success', u'unique': u'abc123456157735629290467272'}
2015-12-17 12:19:32,096 - DEBUG - src.ModAFP[170] - [TestAssertThread] 唯一标示号unique: abc123456157735629290467272
2015-12-17 12:19:32,117 - DEBUG - src.ModAFP[107] - [TestAssertThread] 执行SQL查询: query_str: SELECT resultJson,ReqJson,status,modelName,mobilePhone,modelType,modelResult,identityCard,AppID,errorInfo,realName FROM usermodelhistory WHERE UniqueID = %s (u'abc123456157735629290467272',)
2015-12-17 12:19:32,144 - DEBUG - src.ModAFP[111] - [TestAssertThread] 数据库查询结果result: (u'eyJNZXNzZ2UiOiLnlKjmiLflubTpvoTkuI3nrKblkIjopoHmsYIiLCJNc2dCb2R5Ijp7IkJBSV9S\r\nT05HIjoiIiwiQkxBQ0tMSVNUX0FSUkFZIjoiIiwiTEFPX05BSSI6IiIsIlFIUEYiOiIiLCJRSFpY\r\nIjoiIiwiVE9OR19EVU5fSksiOiIiLCJaSElfTUEiOiIiLCJwbGF0Zm9ybXMiOlt7InBsYXRmb3Jt\r\nTmFtZSI6IlpISV9NQSIsInBsYXRmb3JtTmFtZUV4cGxhaW4iOiIg6Iqd6bq75L+h55SoIn0seyJw\r\nbGF0Zm9ybU5hbWUiOiJCTEFDS0xJU1RfQVJSQVkiLCJwbGF0Zm9ybU5hbWVFeHBsYWluIjoiIOe9\r\nkei0t+m7keWQjeWNlSJ9LHsicGxhdGZvcm1OYW1lIjoiUUhaWCIsInBsYXRmb3JtTmFtZUV4cGxh\r\naW4iOiIg5YmN5rW36buR5ZCN5Y2VIn0seyJwbGF0Zm9ybU5hbWUiOiJUT05HX0RVTl9KSyIsInBs\r\nYXRmb3JtTmFtZUV4cGxhaW4iOiIg5ZCM55u+In1dfSwiU3RhdHVzIjoiMCIsIm1vZGVsX1Jlc3Vs\r\ndCI6IjEifQo=', u'eyJDdXJyZW50VGltZSI6IjIwMTUwNzIzMjAzMjEyMDAwMDAwIiwiRnVuY3Rpb25Db2RlIjoiMTAw\r\nMTIyIiwiTXNnQm9keSI6eyJQcm9qZWN0SWQiOiIxMjMiLCJSRUxBVElPTl9WRVJJRklDQVRJT04i\r\nOlt7InJlbGF0aW9uX25hbWUiOiLpmYjliJozIiwicmVsYXRpb25fcGhvbmUiOiIxODY3NTU1OTc1\r\nMCJ9LHsicmVsYXRpb25fbmFtZSI6IiIsInJlbGF0aW9uX3Bob25lIjoiIn1dLCJVbmlxdWVJRCI6\r\nImFiYzEyMzQ1NjE1NzczNTYyOTI5MDQ2NzI3MiIsImFjY291bnRfbG9naW4iOiJ0ZXN0MTIzIiwi\r\nYXBwbHlEYXRlIjoiMjAxNS0wOC0wMSIsImFzc3VyZVR5cGUiOiJEIiwiYmFua19jYXJ0IjoiMTIz\r\nNDUiLCJibGFja0JveCI6IjEyMyIsImNyZWRpdEFkZHJlc3MiOiLljJfkuqwiLCJjdXJyZW5jeSI6\r\nIjIzMjMyIiwiZGVncmVlIjoi5pys56eRIiwiaWRlbnRpdHlfY2FyZCI6IjAwMzAwMTE5NTkwMTE2\r\nMDAzMSIsImlkdHlwZSI6IjAiLCJpcCI6IjE5Mi4xNjguMS4xMjIiLCJpc19maXJzdF90aW1lIjow\r\nLCJpc19zdHVkZW50IjoxLCJsb2FuTW9uZXkiOjEwMDAwLCJsb2FuVGltZUxpbWl0IjoxMiwibG9h\r\nblR5cGUiOiI5OSIsIm1vYmlsZV9waG9uZSI6IjE4Njc1NTU5NzUwIiwibmFtZSI6IumZiOWImiIs\r\nInJlYXNvbm5vIjoiMDQiLCJ1c2VyX2lkIjoiYWJjMTIzNDU2In19Cg==', u'0', u'\u989d\u5ea6\u8d44\u683c', u'18675559750', 3, u'1', u'003001195901160031', u'abc123456', u'\u7528\u6237\u5e74\u9f84\u4e0d\u7b26\u5408\u8981\u6c42', u'\u9648\u521a')
2015-12-17 12:19:32,171 - DEBUG - src.ModAFP[120] - [TestAssertThread] 数据库表中ReqJson字段值: {"CurrentTime":"20150723203212000000","FunctionCode":"100122","MsgBody":{"ProjectId":"123","RELATION_VERIFICATION":[{"relation_name":"陈刚3","relation_phone":"18675559750"},{"relation_name":"","relation_phone":""}],"UniqueID":"abc123456157735629290467272","account_login":"test123","applyDate":"2015-08-01","assureType":"D","bank_cart":"12345","blackBox":"123","creditAddress":"北京","currency":"23232","degree":"本科","identity_card":"003001195901160031","idtype":"0","ip":"192.168.1.122","is_first_time":0,"is_student":1,"loanMoney":10000,"loanTimeLimit":12,"loanType":"99","mobile_phone":"18675559750","name":"陈刚","reasonno":"04","user_id":"abc123456"}}
2015-12-17 12:19:32,197 - DEBUG - src.ModAFP[121] - [TestAssertThread] 数据库表中resultJson字段值: {"Messge":"用户年龄不符合要求","MsgBody":{"BAI_RONG":"","BLACKLIST_ARRAY":"","LAO_NAI":"","QHPF":"","QHZX":"","TONG_DUN_JK":"","ZHI_MA":"","platforms":[{"platformName":"ZHI_MA","platformNameExplain":" 芝麻信用"},{"platformName":"BLACKLIST_ARRAY","platformNameExplain":" 网贷黑名单"},{"platformName":"QHZX","platformNameExplain":" 前海黑名单"},{"platformName":"TONG_DUN_JK","platformNameExplain":" 同盾"}]},"Status":"0","model_Result":"1"}
2015-12-17 12:19:32,223 - DEBUG - src.ModAFP[125] - [TestAssertThread] 比较数据库表中数据与期望数据: result: (u'0', u'\u989d\u5ea6\u8d44\u683c', u'18675559750', 3, u'1', u'003001195901160031', u'abc123456', u'\u7528\u6237\u5e74\u9f84\u4e0d\u7b26\u5408\u8981\u6c42', u'\u9648\u521a')
expvalues: (u'0', u'\u989d\u5ea6\u8d44\u683c', u'18675559750', 3, u'1', u'003001195901160031', u'abc123456', u'\u7528\u6237\u5e74\u9f84\u4e0d\u7b26\u5408\u8981\u6c42', u'\u9648\u521a')
2015-12-17 12:19:32,244 - DEBUG - src.ModAFP[131] - [TestAssertThread] 比较数据库表中ReqJson字段数据: TestDataDict: {u'FunctionCode': u'100122', u'MsgBody': {u'idtype': u'0', u'account_login': u'test123', u'is_first_time': 0, u'assureType': u'D', u'loanType': u'99', u'ip': u'192.168.1.122', u'RELATION_VERIFICATION': [{u'relation_name': u'\u9648\u521a3', u'relation_phone': u'18675559750'}, {u'relation_name': u'', u'relation_phone': u''}], u'currency': u'23232', u'loanTimeLimit': 12, u'user_id': u'abc123456', u'is_student': 1, u'creditAddress': u'\u5317\u4eac', u'bank_cart': u'12345', u'loanMoney': 10000, u'mobile_phone': u'18675559750', u'degree': u'\u672c\u79d1', u'ProjectId': u'123', u'reasonno': u'04', u'blackBox': u'123', u'name': u'\u9648\u521a', u'identity_card': u'003001195901160031', u'applyDate': u'2015-08-01'}, u'CurrentTime': u'20150723203212000000'}
ReqJsonDict: {u'FunctionCode': u'100122', u'MsgBody': {u'idtype': u'0', u'account_login': u'test123', u'is_first_time': 0, u'assureType': u'D', u'loanType': u'99', u'ip': u'192.168.1.122', u'RELATION_VERIFICATION': [{u'relation_name': u'\u9648\u521a3', u'relation_phone': u'18675559750'}, {u'relation_name': u'', u'relation_phone': u''}], u'currency': u'23232', u'loanTimeLimit': 12, u'blackBox': u'123', u'is_student': 1, u'creditAddress': u'\u5317\u4eac', u'bank_cart': u'12345', u'loanMoney': 10000, u'mobile_phone': u'18675559750', u'degree': u'\u672c\u79d1', u'ProjectId': u'123', u'reasonno': u'04', u'user_id': u'abc123456', u'name': u'\u9648\u521a', u'identity_card': u'003001195901160031', u'applyDate': u'2015-08-01'}, u'CurrentTime': u'20150723203212000000'}
2015-12-17 12:19:32,272 - DEBUG - src.ModAFP[138] - [TestAssertThread] 比较数据库表中resultJson字段部分数据: ResultJsonExpDict: {u'Status': u'0', u'model_Result': u'1'}
resultJsonDict: {u'Status': u'0', u'model_Result': u'1'}
2015-12-17 12:19:32,288 - DEBUG - src.Interface_Assert[55] - [TestAssertThread] Release  public resources
2015-12-17 12:19:32,296 - DEBUG - src.TianchengTest[113] - [TestAssertThread] 结果放入测试结果中: AFP 1 ('PASS',)
...
2015-12-17 12:19:47,335 - DEBUG - src.TianchengTest[124] - [TestAssertThread] 从队列taskassert_queue中取任务超时
2015-12-17 12:19:47,348 - DEBUG - src.TianchengTest[206] - 子线程：TestAssertThread结束
2015-12-17 12:19:47,358 - DEBUG - src.TianchengTest[214] - 测试结束时间: 2015-12-17 12:19:47
2015-12-17 12:19:47,365 - DEBUG - src.TianchengTest[217] - testcase_result: {('AFP', 1): ('PASS',)}
2015-12-17 12:19:47,377 - DEBUG - src.GenerateReport[126] - 生成测试结果报告: .\result\Test_Report_Filename20151217121947.html
